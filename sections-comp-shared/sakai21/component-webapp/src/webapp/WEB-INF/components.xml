<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">
<beans>

<!--
    Provides read-only section information, including membership.
-->
    <bean id="org.sakaiproject.api.section.SectionAwareness"
        class="org.sakaiproject.component.section.sakai21.SectionAwarenessImpl"
        init-method="init">
        <property name="siteService">
            <ref bean="org.sakaiproject.site.api.SiteService"/>
        </property>
        <property name="functionManager">
            <ref bean="org.sakaiproject.authz.api.FunctionManager"/>
        </property>
        <property name="securityService">
            <ref bean="org.sakaiproject.authz.api.SecurityService"/>
        </property>
        <property name="userDirectoryService">
            <ref bean="org.sakaiproject.user.api.UserDirectoryService"/>
        </property>
        <property name="entityManager">
            <ref bean="org.sakaiproject.entity.api.EntityManager"/>
        </property>
    </bean>

<!--
    CourseManager allows for section-related metadata to be attached to a site.
    For instance, if you decide to manage sections and their membership outside
    Sakai (using the SectionManager interface), you could use CourseManager to
    designate sites as "Externally Managed".  The Section Info tool will not allow
    users to add, modify, or remove sections in externally managed sites.  Similarly,
    users can not modify the enrollments in externally managed sites.
    
    Most installations will not need to use CourseManager.
-->
    <bean id="org.sakaiproject.api.section.CourseManager"
        class="org.sakaiproject.component.section.sakai21.CourseManagerImpl">
    </bean>

<!--
	SectionManager provides read-write section information.  Unlike SectionAwareness,
	SectionManager does not include informal (non-section) groups when queried for
	lists of sections.
-->
    <bean id="org.sakaiproject.api.section.SectionManager"
        class="org.sakaiproject.component.section.sakai21.SectionManagerImpl">

        <property name="siteService">
            <ref bean="org.sakaiproject.site.api.SiteService"/>
        </property>
        <property name="authzGroupService">
            <ref bean="org.sakaiproject.authz.api.AuthzGroupService"/>
        </property>
        <property name="securityService">
            <ref bean="org.sakaiproject.authz.api.SecurityService"/>
        </property>
        <property name="userDirectoryService">
            <ref bean="org.sakaiproject.user.api.UserDirectoryService"/>
        </property>
        <property name="entityManager">
            <ref bean="org.sakaiproject.entity.api.EntityManager"/>
        </property>
        <property name="sessionManager">
            <ref bean="org.sakaiproject.tool.api.SessionManager"/>
        </property>
        <property name="eventTrackingService">
            <ref bean="org.sakaiproject.event.api.EventTrackingService"/>
        </property>

		<property name="externalSectionAdvisor">
			<!--
			Advises SectionManager and SectionAwareness on how to get data from an external system.
			This implementation may be used only when the new CourseManagementService
			is in use, and when authzGroups make use of Sakai's providerId mechanism.
			
			If your installation does not fit this description, you need to replace this implementaion
			with one that will work in your enterprise-integration environment.
			 -->
			<bean
				class="org.sakaiproject.component.section.sakai21.advisor.CourseManagementProviderExternalSectionAdvisor">
		        <property name="authzGroupService">
		            <ref bean="org.sakaiproject.authz.api.AuthzGroupService"/>
		        </property>
		        <property name="courseManagementService">
		            <ref bean="org.sakaiproject.coursemanagement.api.CourseManagementService"/>
		        </property>
			</bean>
		</property>
    </bean>

</beans>
